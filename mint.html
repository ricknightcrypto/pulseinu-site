---
layout: default
---

<div class="header">
    Mint Your PINU<br>
</div>

<div class="mint-pinu">
    <div class="mint-form">
        <form>
            <input type="number" pattern="[0-9]" id="plsAmount" name="plsAmount">
            <label for="plsAmount">PLS Amount</label><br>
            <input type="number" id="pinuAmount" name="pinuAmount" disabled>
            <label for="pinuAmount">PINU Amount</label><br>
        </form>
    </div>

    <div style="text-align: left;">
        <div class="mint-prompt-1">
            <b>You will receive <span> 100,000 </span> Pulse Inu (PINU)
                for every PLS submitted.</b>
        </div>

        <div class="mint-prompt-2">
            For <span class="plsAmount">0</span><img width="20" height="20" class="img" src="assets/images/pls_logo.png" /> you will receive
            <span class="pinuAmount">0</span> <img width="20" height="20" class="img" src="assets/images/pinu_small.png" />
        </div>

        <button onclick="mintPINU()" class="mint-btn">Mint PINU</button>
    </div>
</div>

<script>
    /* Prevent submission of Numbers into form field */
    document.querySelector("input").addEventListener("keypress", function (evt) {
        if (evt.which < 48 || evt.which > 57)
        {
            evt.preventDefault();
        }
    });

    /* Conversion Rate */
    const PINU_PER_PULSE = 100000;

    document.getElementsByName("plsAmount")[0].addEventListener('keyup', updatePinuMint);

    function updatePinuMint(){
        document.getElementsByClassName("plsAmount")[0].innerHTML = this.value;
        document.getElementsByClassName("pinuAmount")[0].innerHTML = this.value * PINU_PER_PULSE;
        document.getElementsByName("pinuAmount")[0].value = this.value * PINU_PER_PULSE;
    }

    /***
     *  mintPinu
     *  Mint a specified amount of tokens. Should only accept PLS
     *  calls mint(plsAmount) where plsAmount is the amount of PLS minted
    */
    const mintPINU= async () => {
        if (!isInitialized) {
            await init();
        }

        const callingAccount = window.ethereum._state.accounts[0];
        const plsAmount = document.getElementsByClassName("plsAmount")[0].innerHTML;
        
        pulseInuContract.methods
            .mint()
            .send(
                {
                    from: callingAccount,
                    value: plsAmount * (10 ** 18)
                }
            );
    }
</script>
